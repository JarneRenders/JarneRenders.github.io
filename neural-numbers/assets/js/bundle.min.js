!function a(o,s,c){function u(t,e){if(!s[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};o[t][0].call(i.exports,function(e){return u(o[t][1][e]||e)},i,i.exports,a,o,s,c)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.el=e,this.cleanup(),this.bars=[];for(var t=0;t<10;t+=1){var n=document.createElement("div");n.className="barcontainer",this.bars[t]=document.createElement("div"),this.bars[t].classList.add("bar");var r=document.createElement("div");r.className="bartxt",r.innerHTML="".concat(t),n.appendChild(this.bars[t]),n.appendChild(r),this.el.appendChild(n)}}var e,t,n;return e=i,(t=[{key:"cleanup",value:function(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild)}},{key:"update",value:function(e,t){for(var n=1<arguments.length&&void 0!==t?t:-1,r=0;r<10;r+=1)this.bars[r].dataset.probability=e[r],this.bars[r].style="--probability: ".concat(e[r]),this.bars[r].classList.toggle("highlighted",r===n)}}])&&r(e.prototype,t),n&&r(e,n),i}();n.default=i},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var h=r(e("./Paint.js")),f=e("./MnistData.js"),d=r(e("./NeuralNetwork.js")),p=r(e("./ValidationPreview.js"));function r(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function v(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){c(r,t,n,i,a,"next",e)}function a(e){c(r,t,n,i,a,"throw",e)}i(void 0)})}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.data=new f.MnistData,this.dataloaded=!1,this.testpaint=!0}var e,n,r,i,a,o,s,c,u,l;return e=t,(n=[{key:"initIntroPaint",value:(l=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.trainedmodel){e.next=4;break}return e.next=3,tf.loadLayersModel(this.config.modelPath);case 3:this.trainedmodel=e.sent;case 4:this.paint=new h.default(t,this.trainedmodel,.5,!1,this.config.paintClearTimeout);case 5:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"loadData",value:(u=v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.trainedmodel){e.next=4;break}return e.next=3,tf.loadLayersModel(this.config.modelPath);case 3:this.trainedmodel=e.sent;case 4:if(this.dataloaded){e.next=8;break}return e.next=7,this.data.load();case 7:this.dataloaded=!0;case 8:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"initTrainingEnvironment",value:(c=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadData();case 2:return this.vp=new p.default(this.data,t),this.nn=new d.default(this.vp,t),this.paint=new h.default(t.paint,this.nn.model,0,this.nn.visualization,this.config.paintClearTimeout),e.next=7,this.vp.initValidationImages(t);case 7:this.nn&&(this.vp.updateValidationImages(this.nn.model),this.vp.updateAccuracy(this.nn.model));case 8:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"resetNetwork",value:function(e,t,n,r){this.nn&&(this.nn.setup(e,t,n,r),this.paint.model=this.nn.model)}},{key:"startTraining",value:(s=v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.clearDelayedTrainStepPreview(),this.testpaint=!1,this.nn)return e.next=5,this.nn.train(this.data);e.next=5;break;case 5:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"pauseTraining",value:(o=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.nn)return e.next=3,this.nn.pauseTraining();e.next=4;break;case 3:this.delayedTrainStepPreview(t);case 4:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"singleStep",value:(a=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.nn)return this.testpaint=!1,e.next=4,this.nn.trainSingleStep(this.data);e.next=5;break;case 4:this.delayedTrainStepPreview(t);case 5:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"resetTraining",value:(i=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pauseTraining();case 2:return this.cleanupValidationPreview(),this.cleanupPaint(),this.cleanupNetwork(),e.next=7,this.initTrainingEnvironment(t);case 7:this.testpaint=!0;case 8:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"delayedTrainStepPreview",value:function(e){var t=this;this.clearDelayedTrainStepPreview(),this.traintimeout=setTimeout(function(){t.testpaint=!0,t.paint&&t.paint.predict(),e&&e()},1e3*this.config.lastTrainStepTimeout)}},{key:"clearDelayedTrainStepPreview",value:function(){this.traintimeout&&clearTimeout(this.traintimeout)}},{key:"toggleTraining",value:function(e){this.clearDelayedTrainStepPreview(),this.nn&&(this.nn.toggleTraining(this.data),this.testpaint=!1,this.nn.training||this.delayedTrainStepPreview(e))}},{key:"cleanupNetwork",value:function(){this.nn&&(this.nn.cleanup(),delete this.nn)}},{key:"cleanupValidationPreview",value:function(){this.vp&&(this.vp.cleanup(),delete this.vp)}},{key:"cleanupPaint",value:function(){this.paint&&(this.paint.cleanup(),delete this.paint)}},{key:"addAccuracyCallback",value:function(e,t){this.vp.addAccuracyCallback(e,t)}}])&&y(e.prototype,n),r&&y(e,r),t}();n.default=i},{"./MnistData.js":5,"./NeuralNetwork.js":6,"./Paint.js":7,"./ValidationPreview.js":10}],3:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={eventTypes:["pointerdown","pointerup","pointercancel","keydown","keyup"],domElement:document},i=function(){function a(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=Object.assign(Object.assign({},o),t),r=n.eventTypes,i=n.domElement;this._eventTypes=r,this._domElement=i,this._timeOfLastEvent=0,this._maxId=0,this._timers={},this._nonIdleHandler=function(){e.reset()}}var e,t,n;return e=a,(t=[{key:"_init",value:function(){var t=this;this._eventTypes.forEach(function(e){return t._domElement.addEventListener(e,t._nonIdleHandler,!0)})}},{key:"_deinit",value:function(){var t=this;this._eventTypes.forEach(function(e){return t._domElement.removeEventListener(e,t._nonIdleHandler,!0)})}},{key:"_setTimeoutInternal",value:function(e,t,n){for(var r=arguments.length,i=new Array(3<r?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];0===Object.keys(this._timers).length&&this._init(),void 0===n&&(n=0),this._maxId+=1;var o=this._maxId,s=this._timers,c={id:o,repeat:e,timeoutDelay:n,windowTimeoutId:0,callback:function(){e||this.delete(),t.apply(void 0,i)},reset:function(){window.clearTimeout(this.windowTimeoutId),this.windowTimeoutId=window.setTimeout(this.callback.bind(this),this.timeoutDelay)},clear:function(){window.clearTimeout(this.windowTimeoutId),this.windowTimeoutId=0},delete:function(){this.clear(),delete s[o]}};return(s[o]=c).reset(),o}},{key:"_setIntervalInternal",value:function(e,t,n,r){for(var i=arguments.length,a=new Array(4<i?i-4:0),o=4;o<i;o++)a[o-4]=arguments[o];0===Object.keys(this._timers).length&&this._init(),void 0===n&&(n=0),void 0===r&&(r=n),this._maxId+=1;var s=this._maxId,c=this._timers,u={id:s,repeat:e,hasFired:!1,timeoutDelay:r,intervalDelay:n,windowTimeoutId:0,windowIntervalId:0,callback:function(){t.apply(void 0,a),this.hasFired=!0},intervalCallback:function(){this.windowIntervalId=window.setInterval(this.callback,this.intervalDelay),this.callback()},reset:function(){this.clear(),!this.repeat&&this.hasFired?this.delete():this.windowTimeoutId=window.setTimeout(this.intervalCallback.bind(this),this.timeoutDelay)},clear:function(){window.clearTimeout(this.windowTimeoutId),window.clearInterval(this.windowIntervalId),this.windowTimeoutId=0,this.windowIntervalId=0},delete:function(){this.clear(),delete c[s]}};return(c[s]=u).reset(),s}},{key:"setTimeout",value:function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._setTimeoutInternal.apply(this,[!0,e,t].concat(r))}},{key:"setTimeoutOnce",value:function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._setTimeoutInternal.apply(this,[!1,e,t].concat(r))}},{key:"setInterval",value:function(e,t,n){for(var r=arguments.length,i=new Array(3<r?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return this._setIntervalInternal.apply(this,[!0,e,t,n].concat(i))}},{key:"setIntervalOnce",value:function(e,t,n){for(var r=arguments.length,i=new Array(3<r?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return this._setIntervalInternal.apply(this,[!1,e,t,n].concat(i))}},{key:"clearTimeout",value:function(e){void 0!==this._timers[e]&&this._timers[e].delete(),0===Object.keys(this._timers).length&&this._deinit()}},{key:"clearInterval",value:function(e){this.clearTimeout(e)}},{key:"reset",value:function(){this._timeOfLastEvent=performance.now(),Object.values(this._timers).forEach(function(e){return e.reset()})}},{key:"clear",value:function(){Object.values(this._timers).forEach(function(e){return e.delete()}),this._deinit()}},{key:"getIdleTime",value:function(){return 0===Object.keys(this._timers).length?-1:performance.now()-this._timeOfLastEvent}}])&&r(e.prototype,t),n&&r(e,n),a}();n.default=i},{}],4:[function(e,t,n){"use strict";function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.menuVisible=!1,this.container=e,this.config=t,this.langChangeCallback=n,this.render()}var e,t,n;return e=r,(t=[{key:"render",value:function(){var o=this;this.element=document.createElement("div"),this.element.classList.add("lang-switcher"),this.trigger=document.createElement("button"),this.trigger.setAttribute("type","button"),this.trigger.classList.add("lang-switcher-trigger"),this.element.appendChild(this.trigger);var e=document.createElement("div");e.classList.add("lang-switcher-menu-mask"),this.element.appendChild(e),this.menu=document.createElement("ul"),this.menu.classList.add("lang-switcher-menu"),e.appendChild(this.menu),Object.entries(this.config.languages).forEach(function(e){var t=s(e,2),n=t[0],r=t[1],i=document.createElement("li"),a=document.createElement("button");a.setAttribute("type","button"),a.innerText=r,a.addEventListener("pointerdown",function(e){o.langChangeCallback(n),e.preventDefault()}),i.appendChild(a),o.menu.appendChild(i)}),this.container.appendChild(this.element),this.menu.style.bottom="".concat(-1*this.menu.clientHeight-10,"px"),window.document.addEventListener("pointerdown",function(e){o.menuVisible&&o.hideMenu()}),this.trigger.addEventListener("pointerdown",function(e){o.menuVisible||(o.showMenu(),e.stopPropagation())})}},{key:"showMenu",value:function(){this.menuVisible=!0,this.menu.classList.add("visible")}},{key:"hideMenu",value:function(){this.menuVisible=!1,this.menu.classList.remove("visible")}}])&&i(e.prototype,t),n&&i(e,n),r}();n.default=a},{}],5:[function(e,t,n){"use strict";function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.MnistData=void 0;var h=784,f=52e3,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shuffledTrainIndex=0,this.shuffledTestIndex=0}var t,n,r,s,i;return t=e,(n=[{key:"load",value:(s=regeneratorRuntime.mark(function e(){var o,s,c,t,n,r,i,a,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=new Image,s=document.createElement("canvas"),c=s.getContext("2d"),t=new Promise(function(a,e){o.crossOrigin="",o.onload=function(){o.width=o.naturalWidth,o.height=o.naturalHeight;var e=new ArrayBuffer(20384e4);s.width=o.width,s.height=5e3;for(var t=0;t<13;t++){var n=new Float32Array(e,t*h*5e3*4,392e4);c.drawImage(o,0,5e3*t,o.width,5e3,0,0,o.width,5e3);for(var r=c.getImageData(0,0,s.width,s.height),i=0;i<r.data.length/4;i++)n[i]=r.data[4*i]/255}u.datasetImages=new Float32Array(e),a()},o.src="assets/mnist/mnist_images.png"}),n=fetch("assets/mnist/mnist_labels_uint8"),e.next=7,Promise.all([t,n]);case 7:return r=e.sent,i=l(r,2),i[0],a=i[1],e.t0=Uint8Array,e.next=14,a.arrayBuffer();case 14:e.t1=e.sent,this.datasetLabels=new e.t0(e.t1),this.trainIndices=tf.util.createShuffledIndices(f),this.testIndices=tf.util.createShuffledIndices(13e3),this.trainImages=this.datasetImages.slice(0,h*f),this.testImages=this.datasetImages.slice(h*f),this.trainLabels=this.datasetLabels.slice(0,52e4),this.testLabels=this.datasetLabels.slice(52e4);case 22:case"end":return e.stop()}},e,this)}),i=function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){c(r,t,n,i,a,"next",e)}function a(e){c(r,t,n,i,a,"throw",e)}i(void 0)})},function(){return i.apply(this,arguments)})},{key:"nextTrainBatch",value:function(e){var t=this;return this.nextBatch(e,[this.trainImages,this.trainLabels],function(){return t.shuffledTrainIndex=(t.shuffledTrainIndex+1)%t.trainIndices.length,t.trainIndices[t.shuffledTrainIndex]})}},{key:"nextTestBatch",value:function(e){var t=this;return this.nextBatch(e,[this.testImages,this.testLabels],function(){return t.shuffledTestIndex=(t.shuffledTestIndex+1)%t.testIndices.length,t.testIndices[t.shuffledTestIndex]})}},{key:"nextBatch",value:function(e,t,n){for(var r=new Float32Array(e*h),i=new Uint8Array(10*e),a=0;a<e;a++){var o=n(),s=t[0].slice(o*h,o*h+h);r.set(s,a*h);var c=t[1].slice(10*o,10*o+10);i.set(c,10*a)}return{xs:tf.tensor2d(r,[e,h]),labels:tf.tensor2d(i,[e,10])}}}])&&a(t.prototype,n),r&&a(t,r),e}();n.MnistData=i},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,c=(r=e("./TrainingVisualization.js"))&&r.__esModule?r:{default:r};function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function h(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){u(r,t,n,i,a,"next",e)}function a(e){u(r,t,n,i,a,"throw",e)}i(void 0)})}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.els=t,this.vp=e,this.setup(),this.visualization=new c.default(this,t)}var e,t,r,i,a,o,s;return e=n,(t=[{key:"setup",value:function(e,t,n,r){var i=0<arguments.length&&void 0!==e?e:"dense",a=1<arguments.length&&void 0!==t?t:"adam",o=2<arguments.length&&void 0!==n?n:.001,s=3<arguments.length&&void 0!==r?r:"relu";console.log("Setting up NN model=".concat(i," optimizer=").concat(a," learningrate=").concat(o," activation=").concat(s)),this.modelid=i,this.training=!1,this.trainedimages=0,this.lastrainedimages=0,this.pausecbs=[],this.els.trainingProgress.innerHTML=this.trainedimages,this.model&&this.model.dispose(),this.model=tf.sequential();var c=this.model;"cnn"===i?(c.add(tf.layers.conv2d({inputShape:[28,28,1],kernelSize:5,filters:8,strides:1,activation:s,kernelInitializer:"varianceScaling"})),c.add(tf.layers.maxPooling2d({poolSize:[2,2],strides:[2,2]})),c.add(tf.layers.conv2d({kernelSize:5,filters:16,strides:1,activation:s,kernelInitializer:"varianceScaling"})),c.add(tf.layers.maxPooling2d({poolSize:[2,2],strides:[2,2]})),c.add(tf.layers.flatten())):"dense"===i?(c.add(tf.layers.flatten({inputShape:[28,28,1]})),c.add(tf.layers.dense({units:100,activation:s,kernelInitializer:"varianceScaling"}))):"nohidden"===i&&c.add(tf.layers.flatten({inputShape:[28,28,1]}));c.add(tf.layers.dense({units:10,kernelInitializer:"varianceScaling",activation:"softmax"}));var u="adam"===a?tf.train.adam(o):tf.train.sgd(o);return c.compile({optimizer:u,loss:"categoricalCrossentropy",metrics:["accuracy"]}),c}},{key:"trainByBatchFromData",value:(s=h(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,c,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 1!==n&&1!==r||tf.setBackend("cpu"),i=this.model,a=tf.tidy(function(){var e=t.nextTrainBatch(n);return[e.xs.reshape([n,28,28,1]),e.labels]}),o=l(a,2),s=o[0],c=o[1],e.next=5,this.visualization.setCurrentTraining(s,c);case 5:return e.next=7,i.fit(s,c,{batchSize:r,callbacks:{onEpochEnd:function(){var e=h(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),onBatchEnd:function(){var e=h(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u.trainedimages+=r,u.els.trainingProgress.innerHTML=u.trainedimages;case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}});case 7:tf.dispose(s),tf.dispose(c),1!==n&&1!==r||tf.setBackend("webgl");case 10:case"end":return e.stop()}},e,this)})),function(e,t,n){return s.apply(this,arguments)})},{key:"trainSingleStep",value:(o=h(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.trainByBatchFromData(t,1,1);case 2:this.vp.updateValidationImages(this.model),this.vp.updateAccuracy(this.model);case 4:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"train",value:(a=h(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.training=!0;case 1:if(this.training)return 0,e.next=6,this.trainByBatchFromData(t,32,32);e.next=15;break;case 6:if(!(this.trainedimages>this.lastrainedimages+Math.min(1e3,.3*this.trainedimages)||this.trainedimages<250)){e.next=13;break}if(this.vp.updateValidationImages(this.model),this.vp.updateAccuracy(this.model),this.trainedimages<100)return e.next=12,new Promise(function(e){return setTimeout(e,1e3/(5+4*n.trainedimages)*(n.trainedimages-n.lastrainedimages))});e.next=12;break;case 12:this.lastrainedimages=this.trainedimages;case 13:e.next=1;break;case 15:for(;0<this.pausecbs.length;)this.pausecbs.pop()();case 16:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"addPauseCallback",value:function(e){this.pausecbs.push(e)}},{key:"pauseTraining",value:function(){var t=this;return new Promise(function(e){t.training?(t.addPauseCallback(e),t.training=!1):e()})}},{key:"toggleTraining",value:(i=h(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.training)return e.next=3,this.pauseTraining();e.next=5;break;case 3:e.next=7;break;case 5:return e.next=7,this.train(t);case 7:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"cleanup",value:function(){this.model.dispose(),this.trainedimages=0,this.lastrainedimages=0}}])&&f(e.prototype,t),r&&f(e,r),n}();n.default=a},{"./TrainingVisualization.js":9}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("./BarChart.js"))&&r.__esModule?r:{default:r};function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=9,u=2*c,l=function(){function a(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:2.2;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.clearTimeoutTime=i,this.drawingChanged=!0,this.model=t,this.nwvis=r,this.outputThreshold=n,this.pos={x:0,y:0},this.createUI(e),this.empty=!0,this.isdown=!1,this.pointerId=-1}var e,t,n;return e=a,(t=[{key:"addEventListeners",value:function(){var t=this;for(var e in this.eventfunctions={pointerdown:function(e){t.isdown||(t.removeClearTimeout(),t.setPosition(e),t.isdown=!0,t.pointerId=e.pointerId)},pointermove:function(e){t.isdown&&t.pointerId===e.pointerId&&t.draw(e)},pointerup:function(e){t.pointerId===e.pointerId&&(t.setClearTimeout(),t.isdown=!1)},pointerleave:function(e){t.pointerId===e.pointerId&&(t.setClearTimeout(),t.isdown=!1)},pointercancel:function(e){t.pointerId===e.pointerId&&(t.setClearTimeout(),t.isdown=!1)}},this.eventfunctions)this.drawcanvas.addEventListener(e,this.eventfunctions[e],{passive:!0})}},{key:"removeEventListeners",value:function(){for(var e in this.eventfunctions)this.drawcanvas.removeEventListener(e,this.eventfunctions[e])}},{key:"createUI",value:function(e){var t=this;this.drawcanvas=e.querySelector(".drawcanvas"),this.normalizecanvas=e.querySelector(".normalizecanvas")||document.createElement("canvas"),this.outputbars=e.querySelector(".bars"),this.outputdigit=e.querySelector(".digit"),this.inputbox=e.querySelector(".input.box"),this.addEventListeners();var n=this.normalizecanvas,r=this.drawcanvas;n.width=28,n.height=28;function i(){c=Math.floor(t.drawcanvas.clientWidth/28)-1,u=2*c,r.width=t.drawcanvas.clientWidth,r.height=t.drawcanvas.clientWidth}i(),window.onresize=function(){i()},this.drawcontext=this.drawcanvas.getContext("2d"),this.normalizecontext=this.normalizecanvas.getContext("2d"),this.outputbars&&(this.barchart=new o.default(this.outputbars)),this.clear()}},{key:"setPosition",value:function(e){var t=this.drawcanvas.getBoundingClientRect();return this.pos.x=e.clientX-t.left,this.pos.y=e.clientY-t.top,!0}},{key:"removeClearTimeout",value:function(){return this.clearTimeout&&clearTimeout(this.clearTimeout),!0}},{key:"setClearTimeout",value:function(){var e=this;return this.removeClearTimeout(),this.clearTimeout=setTimeout(function(){e.clear()},1e3*this.clearTimeoutTime),!0}},{key:"draw",value:function(e){this.removeClearTimeout();var t=this.pos.x,n=this.pos.y;this.setPosition(e);var r=this.pos.x,i=this.pos.y;if(Math.abs(r-t)+Math.abs(i-n)<3)return this.pos.x=t,void(this.pos.y=n);this.inputbox.classList.remove("background"),this.empty=!1,this.drawcontext.beginPath(),this.drawcontext.lineWidth=u,this.drawcontext.lineCap="round",this.drawcontext.strokeStyle="white",this.drawcontext.moveTo(t,n),this.setPosition(e),this.drawcontext.lineTo(r,i),this.drawcontext.stroke(),this.normalizecontext.fillStyle="black",this.normalizecontext.fillRect(0,0,this.normalizecanvas.width,this.normalizecanvas.height),this.drawingChanged=!0,this.normalize(u),this.predict()}},{key:"normalize",value:function(e){for(var t,n=0,r=0,i=1e3,a=-1e3,o=1e3,s=-1e3,c=this.drawcontext.getImageData(0,0,this.drawcanvas.width,this.drawcanvas.height).data,u=0,l=0;l<c.length;l+=4*e){var h=l/4%this.drawcanvas.width,f=l/4/this.drawcanvas.width|0;u+=c[l],n+=c[l]*h,r+=c[l]*f,0<c[l]&&(i=Math.min(i,f),a=Math.max(a,f),o=Math.min(o,h),s=Math.max(s,h))}return 0<u?(n/=u,r/=u,t=Math.max(s-o,a-i),this.normalizecontext.drawImage(this.drawcanvas,o,i,t,t,14+20/t*(o-n),14+20/t*(i-r),20,20)):this.normalizecontext.fillRect(0,0,this.normalizecanvas.width,this.normalizecanvas.height),!0}},{key:"predict",value:function(){var e,t,n,r=this;return this.model&&this.normalizecanvas&&this.drawingChanged&&(t=(e=i(tf.tidy(function(){var e=tf.browser.fromPixels(r.normalizecanvas,1).toFloat().mul(tf.scalar(1/255)).clipByValue(0,1).reshape([1,28,28,1]);r.nwvis&&r.nwvis.show(e,r.normalizecontext.getImageData(0,0,r.normalizecanvas.width,r.normalizecanvas.height).data.filter(function(e,t){return t%4==0}));var t=r.model.predict(e);return[t.dataSync(),t.argMax([-1]).dataSync()]}),2))[0],n=e[1],this.barchart&&this.barchart.update(t,n),this.outputdigit&&(this.outputdigit.innerHTML=!this.empty&&t[n]>this.outputThreshold?n:"?",this.outputdigit.parentElement.classList.toggle("solved",t[n]>this.outputThreshold))),!0}},{key:"clear",value:function(){this.drawcontext.fillRect(0,0,this.drawcanvas.width,this.drawcanvas.height),this.empty=!0,this.normalize(100),this.predict(),this.inputbox.classList.add("background")}},{key:"cleanup",value:function(){this.clear(),this.removeEventListeners(),this.barchart&&this.barchart.cleanup()}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=l},{"./BarChart.js":1}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=e("./slide.js"))&&r.__esModule?r:{default:r};function c(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){c(r,t,n,i,a,"next",e)}function a(e){c(r,t,n,i,a,"throw",e)}i(void 0)})}}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function n(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.createEventMask(),this.controller=e,this.slides=Array.from(document.querySelectorAll("[data-slide]")).map(function(e){return e.getAttribute("data-slide")}),this.currentSlide=0,this.currentSlideController=null,window.onhashchange=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.maskEvents(),e.next=3,t.doSlideChange();case 3:t.unmaskEvents();case 4:case"end":return e.stop()}},e)})),this.doSlideChange(),window.addEventListener("keydown",function(e){switch(e.key){case"ArrowLeft":t.goPrevious();break;case"ArrowRight":t.goNext()}})}var e,t,r,i;return e=n,(t=[{key:"createEventMask",value:function(){this.eventMask=document.createElement("div"),this.eventMask.style.position="absolute",this.eventMask.style.top="0",this.eventMask.style.left="0",this.eventMask.style.width="100%",this.eventMask.style.height="100%",this.eventMask.style.zIndex="1000000",this.eventMask.style.pointerEvents="all",this.eventMask.style.backgroundColor="transparent",this.eventMask.style.display="none",window.document.body.appendChild(this.eventMask)}},{key:"maskEvents",value:function(){this.eventMask.style.display="block"}},{key:"unmaskEvents",value:function(){this.eventMask.style.display="none"}},{key:"goFirst",value:function(){0<this.slides.length&&this.goTo(this.slides[0])}},{key:"goNext",value:function(){var e=this.slides.indexOf(this.getCurrentSlide());e<this.slides.length-1&&this.goTo(this.slides[e+1])}},{key:"goPrevious",value:function(){var e=this.slides.indexOf(this.getCurrentSlide());0<e&&this.goTo(this.slides[e-1])}},{key:"goTo",value:function(e){this.slides.includes(e)&&(window.location.hash=e)}},{key:"getCurrentSlide",value:function(){var e=window.location.hash.substring(1);return 0===this.slides.length?null:""!==e?e:this.slides[0]}},{key:"doSlideChange",value:(i=a(regeneratorRuntime.mark(function e(){var t,n,r,i,a,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getCurrentSlide(),document.querySelector(".footer .navigation").childNodes.forEach(function(e){e.classList.remove("selected")}),this.slides.forEach(function(e){var t=document.querySelector("[data-slide=".concat(e,"]"));t.onExit&&t.open&&t.onExit(o.controller),t.open=!1,t.classList.remove("visible"),t.classList.remove("entering")}),this.currentSlideController)return e.next=6,this.currentSlideController.onExit();e.next=7;break;case 6:this.currentSlideController=null;case 7:if(!(n=document.querySelector("[data-slide=".concat(t,"]")))){e.next=21;break}if(r=n.getAttribute("data-slide-nav")||t,(i=document.querySelector(".footer .navigation [href='#".concat(r,"']")))&&i.classList.add("selected"),n.open=!0,n.classList.add("visible"),setTimeout(function(){n.classList.add("entering")},0),n.onEnter&&n.onEnter(this.controller),a=s.default.getClass(t))return this.currentSlideController=new a(n,this.controller),e.next=21,this.currentSlideController.onEnter();e.next=21;break;case 21:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})}])&&o(e.prototype,t),r&&o(e,r),n}();n.default=i},{"./slide.js":18}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("./BarChart.js"))&&r.__esModule?r:{default:r};function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){u(r,t,n,i,a,"next",e)}function a(e){u(r,t,n,i,a,"throw",e)}i(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.els=t,this.nn=e,this.currentDigit=new Float32Array(784),this.currentProbabilities=new Float32Array(10),this.canvas=this.els.network;var n=this.canvas;n.height=n.clientHeight,n.width=n.clientWidth,this.ctx=n.getContext("2d"),this.acanvas=this.els.activations;var r=this.acanvas;r.height=r.clientHeight,r.width=r.clientWidth,this.actx=r.getContext("2d"),this.icanvas=this.els.input;var i=this.icanvas;i.height=i.clientHeight,i.width=i.clientWidth,this.ictx=i.getContext("2d"),this.barchart=new o.default(this.els.bars),this.traindigit=document.createElement("canvas"),this.traindigit.height=28,this.traindigit.width=28,this.lt1=.08,this.lt2=.2,this.renderNetwork(),this.renderActivations()}var e,t,n,r,i;return e=a,(t=[{key:"findthreshold",value:function(e,t,n,r){var i=(t+n)/2,a=e.filter(function(e){return i*i<e*e}).length;return n-t<.001||Math.abs(a-r)<.2*r?i:a<r?this.findthreshold(e,t,i,r):this.findthreshold(e,i,n,r)}},{key:"drawdenselayer",value:function(e,t,n,r,i,a,o,s){for(var c=this.ctx,u=this.findthreshold(n,.8*s,1.2*s,200),l=0;l<e;l+=1)for(var h=0;h<t;h+=1){var f=n[l*t+h];u*u<f*f&&(c.beginPath(),c.globalAlpha=Math.abs(f)*(.3/u),c.strokeStyle=0<f?"blue":"red",c.moveTo(r,i+l*o/(e-1)),c.bezierCurveTo(r+a/2,i+l*o/(e-1),r+a/2,i+h*o/(t-1),r+a,i+h*o/(t-1)),c.stroke())}return c.globalAlpha=1,u}},{key:"drawnodes",value:function(e,t,n,r,i,a,o){n=n||new Array(t).fill(0);for(var s=0;s<t;s+=1){var c=Math.max(128,255-(128*n[s]|0));o<=2&&(c=(c+128)/2|0),e.fillStyle="rgb(".concat(c,", ").concat(c,", ").concat(c,")"),e.beginPath(),e.arc(r,i+s*a/(t-1),o,0,2*Math.PI,!1),e.fill()}}},{key:"renderNetwork",value:function(){var e,t,n;"dense"===this.nn.modelid&&(e=this.canvas,t=this.ctx,n=this.nn.model.getWeights().map(function(e){return e.dataSync()}),t.clearRect(0,0,e.width,e.height),this.lt1=this.drawdenselayer(784,100,n[0],20,50,380,400,this.lt1),this.lt2=this.drawdenselayer(100,10,n[2],400,50,380,400,this.lt2))}},{key:"renderActivations",value:function(){this.actx.clearRect(0,0,this.acanvas.width,this.acanvas.height),this.ictx.clearRect(0,0,this.icanvas.width,this.icanvas.height),this.traindigit.active&&(this.ictx.imageSmoothingEnabled=!1,this.ictx.filter="brightness(0.5) invert(1) brightness(0.95)",this.ictx.drawImage(this.traindigit,0,0,28,28,60,60,168,168),this.ictx.filter="none"),this.barchart.update(this.currentProbabilities,this.currentTarget),this.drawnodes(this.actx,784,this.currentDigit,20,50,400,.5),"dense"===this.nn.modelid&&this.drawnodes(this.actx,100,this.intermediateActivations,400,50,400,1.5)}},{key:"setCurrentTraining",value:(i=s(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slice([0,0,0,0],[1,28,28,1]),i=r.reshape([28,28,1]),e.next=4,tf.browser.toPixels(i,this.traindigit);case 4:this.traindigit.active=!0,this.currentDigit=i.dataSync(),this.computeActivations(r),a=n.slice([0,0],[1,10]),o=a.argMax([-1]).dataSync(),s=c(o,1),this.currentTarget=s[0],this.renderNetwork(),this.renderActivations(),r.dispose(),a.dispose(),i.dispose();case 16:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"show",value:(r=s(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.computeActivations(t),this.currentDigit=n,this.traindigit.active=!1,this.renderActivations();case 4:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"computeActivations",value:function(e){var t,n,r,i,a,o;"dense"===this.nn.modelid?(t=this.nn.model.layers[0].apply(e),n=this.nn.model.layers[1].apply(t),r=this.nn.model.layers[2].apply(n),this.intermediateActivations=n.dataSync().map(function(e){return Math.abs(e)/2}),this.currentProbabilities=r.dataSync(),i=c(r.argMax([-1]).dataSync(),1),this.currentTarget=i[0],t.dispose(),n.dispose(),r.dispose()):(a=this.nn.model.predict(e),this.currentProbabilities=a.dataSync(),o=c(a.argMax([-1]).dataSync(),1),this.currentTarget=o[0],a.dispose())}}])&&l(e.prototype,t),n&&l(e,n),a}();n.default=a},{"./BarChart.js":1}],10:[function(e,t,n){"use strict";function c(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){c(r,t,n,i,a,"next",e)}function a(e){c(r,t,n,i,a,"throw",e)}i(void 0)})}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.data=e,this.els=t,this.displayedAccuracy=0,this.accuracy=this.displayedAccuracy,this.isanimating=!0,this.acccbs=[]}var e,t,r,i,a,o;return e=n,(t=[{key:"initValidationImages",value:(o=s(regeneratorRuntime.mark(function e(){var o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.els.validationImages)return e.delegateYield(regeneratorRuntime.mark(function e(){var i,a,t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.digittext=[],o.digitcontainer=[],o.examples=o.data.nextTestBatch(50),i=o.examples,e.next=6,i.labels.argMax([-1]).dataSync();case 6:o.examplelabels=e.sent,a=document.createElement("div"),t=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=tf.tidy(function(){return i.xs.slice([t,0],[1,i.xs.shape[1]]).reshape([28,28,1])}),r=document.createElement("canvas"),o.digitcontainer[t]=document.createElement("div"),e.next=5,tf.browser.toPixels(n,r);case 5:o.digitcontainer[t].appendChild(r),o.digittext[t]=document.createElement("div"),o.digitcontainer[t].appendChild(o.digittext[t]),a.appendChild(o.digitcontainer[t]),n.dispose();case 10:case"end":return e.stop()}},e)}),n=0;case 10:if(n<50)return e.delegateYield(t(n),"t0",12);e.next=15;break;case 12:n+=1,e.next=10;break;case 15:o.els.validationImages.appendChild(a);case 16:case"end":return e.stop()}},e)})(),"t0",2);e.next=2;break;case 2:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"updateValidationImages",value:(a=s(regeneratorRuntime.mark(function e(t){var n,r,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.els.validationImages)for(n=tf.tidy(function(){var e=i.examples.xs.reshape([50,28,28,1]);return t.predict(e).argMax([-1]).dataSync()}),r=0;r<50;r+=1)this.digittext[r].innerHTML="".concat(n[r]),this.digitcontainer[r].style.backgroundColor=n[r]===this.examplelabels[r]?"green":"red";case 1:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"updateAccuracy",value:(i=s(regeneratorRuntime.mark(function e(r){var i,a=this,t=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=1<t.length&&void 0!==t[1]?t[1]:100,this.accuracy=tf.tidy(function(){var e=a.data.nextTestBatch(i),t=e.xs.reshape([i,28,28,1]),n=e.labels;return r.evaluate(t,n)[1].dataSync()}),i<1e3&&.9<this.accuracy)return e.next=5,this.updateAccuracy(r,1e3);e.next=5;break;case 5:this.els.validationAccuracy.innerHTML="".concat(this.accuracy<.9?Math.round(100*this.accuracy):Math.round(1e3*this.accuracy)/10,"%"),this.acccbs.filter(function(e){return e.acc<=a.accuracy}).map(function(e){return e.cb()}),this.acccbs=this.acccbs.filter(function(e){return e.acc>a.accuracy});case 8:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"animate",value:function(){var e,t=this;this.isanimating&&(this.displayedAccuracy=.95*this.displayedAccuracy+.05*this.accuracy,e=this.displayedAccuracy<.95?Math.round(100*this.displayedAccuracy):Math.round(1e3*this.displayedAccuracy)/10,this.els.validationAccuracy.innerHTML="".concat(e,"%"),window.requestAnimationFrame(function(){return t.animate()}))}},{key:"cleanup",value:function(){for(;this.els.validationImages&&this.els.validationImages.firstChild;)this.els.validationImages.removeChild(this.els.validationImages.firstChild);this.isanimating=!1}},{key:"addAccuracyCallback",value:function(e,t){this.acccbs.push({cb:t,acc:e})}}])&&u(e.prototype,t),r&&u(e,r),n}();n.default=r},{}],11:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}var e,t,r;return e=n,r=[{key:"init",value:function(e){var t=0<arguments.length&&void 0!==e?e:"en";return IMAGINARY.i18n.init({queryStringVariable:"lang",translationsDirectory:"tr",defaultLanguage:t}).then(function(){n.update()})}},{key:"setLanguage",value:function(e){IMAGINARY.i18n.setLang(e).then(function(){n.update()})}},{key:"update",value:function(){document.querySelectorAll("[data-i18n-str]").forEach(function(e){e.innerHTML=IMAGINARY.i18n.t(e.getAttribute("data-i18n-str"))}),document.querySelectorAll("[data-i18n-str-title]").forEach(function(e){e.setAttribute("title",IMAGINARY.i18n.t(e.getAttribute("data-i18n-str-title")))}),document.querySelectorAll("[data-i18n-html]").forEach(function(t){var n="pages/".concat(IMAGINARY.i18n.getLang(),"/").concat(t.getAttribute("data-i18n-html"),".html");fetch(n).then(function(e){if(200<=e.status&&e.status<300)return e.text();throw new Error(e.statusText)}).then(function(e){t.innerHTML=e}).catch(function(e){console.error("Error fetching i18n page ".concat(n)),console.error(e)})})}}],(t=null)&&i(e.prototype,t),r&&i(e,r),n}();n.default=r},{}],12:[function(e,t,n){"use strict";e("./main")},{"./main":13}],13:[function(e,t,n){"use strict";var r=c(e("./Controller.js")),i=c(e("./IdleDetector.js")),a=c(e("./SlideShow.js")),o=c(e("./i18nController.js")),s=c(e("./LangSwitcher.js"));function c(e){return e&&e.__esModule?e:{default:e}}e("./slide-controllers/intro.js"),e("./slide-controllers/training.js"),e("./slide-controllers/what-is-training-data.js"),e("./slide-controllers/design-network.js");var u={paintClearTimeout:2.2,idleReload:300,lastTrainStepTimeout:1.5,languages:{en:"English"},defaultLanguage:"en",modelPath:"assets/models/my-model.json"},l=new URL("./config.json",window.location.href),h=function(){var e=new URLSearchParams(window.location.search);if(!e.has("config"))return null;var t=e.get("config"),n=/^[A-Za-z0\-_.]+$/;if(n.test(t))return new URL(t,window.location.href);throw new Error("Custom config path ".concat(t," must match ").concat(n.toString(),"."))}()||l;fetch(h,{cache:"no-store"}).then(function(e){if(200<=e.status&&e.status<300)return e.json();throw new Error(e.statusText)}).catch(function(e){throw new Error("Failed to load config file ".concat(h,": ").concat(e))}).then(function(e){return Object.assign({},u,e)}).then(function(t){o.default.init(t.defaultLanguage).then(function(){var e=new r.default(t);new a.default(e);e.loadData(),1<Object.entries(t.languages).length&&new s.default(document.querySelector(".footer .utility"),t,function(e){o.default.setLanguage(e)}),(new i.default).setTimeout(function(){window.location.hash="#intro",window.location.reload(),e.loadData()},1e3*t.idleReload),document.querySelectorAll("a").forEach(function(e){e.addEventListener("dragstart",function(e){e.preventDefault(),e.stopPropagation()})})})}).catch(function(e){return console.error(e)})},{"./Controller.js":2,"./IdleDetector.js":3,"./LangSwitcher.js":4,"./SlideShow.js":8,"./i18nController.js":11,"./slide-controllers/design-network.js":14,"./slide-controllers/intro.js":15,"./slide-controllers/training.js":16,"./slide-controllers/what-is-training-data.js":17}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=e("../slide.js"))&&r.__esModule?r:{default:r};function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){u(r,t,n,i,a,"next",e)}function a(e){u(r,t,n,i,a,"throw",e)}i(void 0)})}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(a){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,i=p(a);return t=o?(e=p(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),n=this,!(r=t)||"object"!==c(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,s["default"]);var e,t,n,r,i,a=d(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a.apply(this,arguments)}return e=o,(t=[{key:"onEnter",value:(i=l(regeneratorRuntime.mark(function e(){var t,n,r,i,a,o,s,c,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.controller.testpaint=!0,n=!(t=!0),r=document.querySelector("[data-slide=design-network] .train"),function(){r.querySelectorAll(".parameter .select").forEach(function(n){n.querySelectorAll(".option").forEach(function(e,t){e.classList.toggle("selected",0===t),0===t&&(n.value=e.dataset.value)})}),r.querySelector(".learningrate").value=-3,r.querySelector(".learningratetxt").innerHTML="0.001"}(),i={trainingProgress:r.querySelector(".imagesused .number"),validationAccuracy:r.querySelector(".accuracy .number"),input:r.querySelector(".traininputcanvas"),network:r.querySelector(".simplenetwork > .network"),activations:r.querySelector(".simplenetwork > .activations"),bars:r.querySelector(".bars"),paint:r.querySelector(".paint")},(a=function(){t=u.controller.nn&&u.controller.nn.training,u.controller.nn&&0<u.controller.nn.trainedimages?r.querySelector(".reset").classList.add("visible"):r.querySelector(".reset").classList.remove("visible"),r.querySelector(".paint").classList.toggle("visible",u.controller.testpaint),r.querySelector(".training").classList.toggle("visible",!u.controller.testpaint),u.controller.testpaint&&u.controller.paint&&u.controller.paint.clear();var e=r.querySelector(".pause-resume");t?(e.classList.remove("resume"),e.classList.add("pause")):(e.classList.add("resume"),e.classList.remove("pause")),r.querySelectorAll(".parameter .select").forEach(function(e){e.querySelectorAll(".option").forEach(function(t){t.onpointerdown=function(){e.value!==t.dataset.value&&(e.querySelectorAll(".option").forEach(function(e){e.classList.toggle("selected",e===t)}),e.value=t.dataset.value,o())}})})})(),r.querySelector(".pause-resume").onpointerdown=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n)return e.abrupt("return");e.next=2;break;case 2:return n=!0,t=!t,e.next=6,u.controller.toggleTraining(a);case 6:a(),r.querySelector(".reset").classList.add("visible"),n=!1;case 9:case"end":return e.stop()}},e)})),r.querySelector(".single-step").onpointerdown=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n)return e.abrupt("return");e.next=2;break;case 2:if(n=!0,t)return e.next=6,u.controller.pauseTraining(a);e.next=9;break;case 6:t=!1,e.next=11;break;case 9:return e.next=11,u.controller.singleStep(a);case 11:a(),n=!1;case 13:case"end":return e.stop()}},e)})),r.querySelector(".reset").onpointerdown=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n)return e.abrupt("return");e.next=2;break;case 2:return n=!0,e.next=5,u.controller.pauseTraining(a);case 5:return e.next=7,u.controller.resetTraining(i);case 7:o(),a(),n=!1;case 10:case"end":return e.stop()}},e)})),o=function(){var e=l(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n)return e.abrupt("return");e.next=2;break;case 2:return n=!0,e.next=5,u.controller.pauseTraining(a);case 5:t=Math.pow(10,r.querySelector(".learningrate").value),r.querySelector(".learningratetxt").innerHTML=t.toPrecision(1),u.controller.resetNetwork(r.querySelector(".modelid").value,r.querySelector(".optimizerid").value,t,r.querySelector(".activation").value),a(),n=!1;case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),s=r.querySelector(".learningrate"),c=r.querySelector(".learningratetxt"),s.oninput=function(){var e=Math.pow(10,s.value);c.innerText=e.toPrecision(1)},r.querySelector(".learningrate").onchange=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o();case 1:case"end":return e.stop()}},e)})),e.next=19,this.controller.initTrainingEnvironment(i);case 19:a();case 20:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"onExit",value:(r=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.controller.cleanupPaint(),e.next=3,this.controller.pauseTraining();case 3:this.controller.cleanupValidationPreview(),this.controller.cleanupNetwork();case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}])&&h(e.prototype,t),n&&h(e,n),o}();n.default=i,s.default.registerClass("design-network",i)},{"../slide.js":18}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=e("../slide.js"))&&r.__esModule?r:{default:r};function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){u(r,t,n,i,a,"next",e)}function a(e){u(r,t,n,i,a,"throw",e)}i(void 0)})}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(a){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,i=p(a);return t=o?(e=p(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),n=this,!(r=t)||"object"!==c(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,s["default"]);var e,t,n,r,i,a=d(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a.apply(this,arguments)}return e=o,(t=[{key:"onEnter",value:(i=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.initIntroPaint(this.element);case 2:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"onExit",value:(r=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.controller.cleanupPaint();case 1:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}])&&h(e.prototype,t),n&&h(e,n),o}();n.default=i,s.default.registerClass("intro",i)},{"../slide.js":18}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=e("../slide.js"))&&r.__esModule?r:{default:r};function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){u(r,t,n,i,a,"next",e)}function a(e){u(r,t,n,i,a,"throw",e)}i(void 0)})}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(a){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,i=p(a);return t=o?(e=p(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),n=this,!(r=t)||"object"!==c(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,s["default"]);var e,t,n,r,i,a=d(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a.apply(this,arguments)}return e=o,(t=[{key:"onEnter",value:(i=l(regeneratorRuntime.mark(function e(){var t,n,r,i,a,o,s,c,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.controller.testpaint=!0,n=!(t=!0),r=document.querySelector("[data-slide=training] .train"),function(){r.querySelectorAll(".parameter .select").forEach(function(n){n.querySelectorAll(".option").forEach(function(e,t){e.classList.toggle("selected",0===t),0===t&&(n.value=e.dataset.value)})}),r.querySelector(".learningrate").value=-3,r.querySelector(".learningratetxt").innerHTML="0.001"}(),i={trainingProgress:r.querySelector(".imagesused .number"),validationAccuracy:r.querySelector(".accuracy .number"),input:r.querySelector(".traininputcanvas"),network:r.querySelector(".simplenetwork > .network"),activations:r.querySelector(".simplenetwork > .activations"),bars:r.querySelector(".bars"),paint:r.querySelector(".paint")},(a=function(){t=u.controller.nn&&u.controller.nn.training,u.controller.nn&&0<u.controller.nn.trainedimages?r.querySelector(".reset").classList.add("visible"):r.querySelector(".reset").classList.remove("visible"),r.querySelector(".paint").classList.toggle("visible",u.controller.testpaint),r.querySelector(".training").classList.toggle("visible",!u.controller.testpaint),u.controller.testpaint&&u.controller.paint&&u.controller.paint.clear();var e=r.querySelector(".pause-resume");t?(e.classList.remove("resume"),e.classList.add("pause")):(e.classList.add("resume"),e.classList.remove("pause")),r.querySelectorAll(".parameter .select").forEach(function(e){e.querySelectorAll(".option").forEach(function(t){t.onpointerdown=function(){e.value!==t.dataset.value&&(e.querySelectorAll(".option").forEach(function(e){e.classList.toggle("selected",e===t)}),e.value=t.dataset.value,o())}})})})(),r.querySelector(".pause-resume").onpointerdown=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n)return e.abrupt("return");e.next=2;break;case 2:return n=!0,t=!t,e.next=6,u.controller.toggleTraining(a);case 6:a(),r.querySelector(".reset").classList.add("visible"),n=!1;case 9:case"end":return e.stop()}},e)})),r.querySelector(".single-step").onpointerdown=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n)return e.abrupt("return");e.next=2;break;case 2:if(n=!0,t)return e.next=6,u.controller.pauseTraining(a);e.next=9;break;case 6:t=!1,e.next=11;break;case 9:return e.next=11,u.controller.singleStep(a);case 11:a(),n=!1;case 13:case"end":return e.stop()}},e)})),r.querySelector(".reset").onpointerdown=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n)return e.abrupt("return");e.next=2;break;case 2:return n=!0,e.next=5,u.controller.pauseTraining(a);case 5:return e.next=7,u.controller.resetTraining(i);case 7:return e.next=9,o();case 9:a(),n=!1;case 11:case"end":return e.stop()}},e)})),o=function(){var e=l(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.controller.pauseTraining(a);case 2:t=Math.pow(10,r.querySelector(".learningrate").value),r.querySelector(".learningratetxt").innerHTML=t.toPrecision(1),u.controller.resetNetwork(r.querySelector(".modelid").value,r.querySelector(".optimizerid").value,t,r.querySelector(".activation").value),a();case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),s=r.querySelector(".learningrate"),c=r.querySelector(".learningratetxt"),s.oninput=function(){var e=Math.pow(10,s.value);c.innerText=e.toPrecision(1)},r.querySelector(".learningrate").onchange=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:case"end":return e.stop()}},e)})),e.next=19,this.controller.initTrainingEnvironment(i);case 19:a();case 20:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"onExit",value:(r=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.controller.cleanupPaint(),e.next=3,this.controller.pauseTraining();case 3:this.controller.cleanupValidationPreview(),this.controller.cleanupNetwork();case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}])&&h(e.prototype,t),n&&h(e,n),o}();n.default=i,s.default.registerClass("training",i)},{"../slide.js":18}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=e("../slide.js"))&&r.__esModule?r:{default:r};function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){u(r,t,n,i,a,"next",e)}function a(e){u(r,t,n,i,a,"throw",e)}i(void 0)})}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(a){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,i=p(a);return t=o?(e=p(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),n=this,!(r=t)||"object"!==c(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,s["default"]);var e,t,n,r,i,a=d(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a.apply(this,arguments)}return e=o,(t=[{key:"onEnter",value:(i=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.initIntroPaint(document.querySelector("#normalizepaint"));case 2:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"onExit",value:(r=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.controller.cleanupPaint();case 1:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}])&&h(e.prototype,t),n&&h(e,n),o}();n.default=i,s.default.registerClass("what-is-training-data",i)},{"../slide.js":18}],18:[function(e,t,n){"use strict";function c(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function o(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){c(r,t,n,i,a,"next",e)}function a(e){c(r,t,n,i,a,"throw",e)}i(void 0)})}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.element=e,this.controller=t}var e,t,r,i,a;return e=n,(t=[{key:"onEnter",value:(a=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)})},{key:"onExit",value:(i=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)})}])&&s(e.prototype,t),r&&s(e,r),n}();(n.default=r).slideClasses={},r.registerClass=function(e,t){r.slideClasses[e]=t},r.getClass=function(e){return r.slideClasses[e]}},{}]},{},[12]);
//# sourceMappingURL=bundle.min.js.map
